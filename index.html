<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DmWin Smart Assistant</title>

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(180deg,#050b1f,#0b1535);
  color:#e8ecff;
}
.container{
  max-width:420px;
  margin:20px auto;
  padding:16px;
}
.card{
  background:#0e1a3a;
  border:1px solid #1f3b8f;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
h1{margin:0 0 6px;font-size:20px}
.small{opacity:.7;font-size:13px}
.green{color:#2ecc71}
.red{color:#ff4d4d}
.violet{color:#c77dff}
.wait{color:#f1c40f}
hr{border:none;border-top:1px solid #1f3b8f;margin:10px 0}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ§  DmWin Smart Assistant</h1>
<div class="small">Education / analysis only</div>

<div class="card">
ğŸŸ¢ <b>Status:</b> LIVE<br>
â± <span id="timer">--s remaining</span>
</div>

<div class="card" id="predictionBox">Loadingâ€¦</div>

<div class="card" id="resultBox">Waiting for resultâ€¦</div>

<div class="card" id="statsBox">
ğŸ“Š Wins: 0 | âŒ Losses: 0 | ğŸ¯ Accuracy: 0%
</div>

<div class="card">
ğŸ“œ <b>Latest Results</b>
<div id="history"></div>
</div>

<div class="small">âš  No guarantees â€¢ Avoid over betting â€¢ Stay disciplined</div>

</div>

<script>
const API="https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageNo=1&pageSize=20";

let lastBet=null;
let wins=0,losses=0;

// restore stats
if(localStorage.dmwinStats){
  ({wins,losses}=JSON.parse(localStorage.dmwinStats));
}

function saveStats(){
  localStorage.dmwinStats=JSON.stringify({wins,losses});
}

function colorOf(n){
  n=Number(n);
  if(n===0) return "red,violet";
  if(n===5) return "green,violet";
  return n%2===0?"red":"green";
}

function sizeOf(n){
  return n>=5?"BIG":"SMALL";
}

// ğŸ”¥ HACKER-LEVEL ANALYSIS
function analyze(list){
  let g=0,r=0,violet=0,big=0,small=0;

  list.forEach((i,idx)=>{
    let w = idx<5 ? 1.6 : idx<10 ? 1.1 : 0.7;
    let c=colorOf(i.number);
    let s=sizeOf(i.number);

    if(c.includes("violet")) violet+=w;
    if(c==="green") g+=w;
    if(c==="red") r+=w;
    if(s==="BIG") big+=w;
    if(s==="SMALL") small+=w;
  });

  const total=g+r;
  const bias=Math.max(g,r)/Math.max(1,total);

  if(violet>=3) return {action:"WAIT",reason:"High violet risk"};
  if(bias<0.60) return {action:"WAIT",reason:"Low bias"};

  const color=g>r?"GREEN":"RED";
  const size=big>small?"BIG":"SMALL";

  return {
    action:color,
    size,
    confidence:Math.round(bias*100)
  };
}

async function tick(){
  const res=await fetch(API);
  const json=await res.json();
  const list=json.data.list;

  const a=analyze(list);
  const box=document.getElementById("predictionBox");

  if(a.action==="WAIT"){
    box.innerHTML=`ğŸ¯ <b>Prediction:</b> <span class="wait">WAIT</span><br>
    âš  ${a.reason}`;
    lastBet=null;
  }else{
    box.innerHTML=`ğŸ¯ <b>Color:</b> <span class="${a.action.toLowerCase()}">${a.action}</span><br>
    ğŸ“ <b>Big/Small:</b> ${a.size}<br>
    ğŸ”¥ Confidence: ${a.confidence}%`;
    lastBet={color:a.action,size:a.size};
  }

  // RESULT CHECK
  const latest=list[0];
  const lc=colorOf(latest.number);
  const ls=sizeOf(latest.number);
  const rb=document.getElementById("resultBox");

  if(lastBet){
    if(lc.includes(lastBet.color.toLowerCase()) && ls===lastBet.size){
      wins++; rb.innerHTML="âœ… Last Bet: WIN";
    }else{
      losses++; rb.innerHTML="âŒ Last Bet: LOSS";
    }
    saveStats();
    lastBet=null;
  }

  const total=wins+losses;
  const acc=total?Math.round(wins/total*100):0;
  document.getElementById("statsBox").innerHTML=
    `ğŸ“Š Wins: ${wins} | âŒ Losses: ${losses} | ğŸ¯ Accuracy: ${acc}%`;

  // HISTORY
  document.getElementById("history").innerHTML=
    list.slice(0,5).map(i=>{
      const c=colorOf(i.number);
      return `<div class="${c.includes("green")?"green":"red"}">
      ${i.issueNumber} â†’ ${c}
      </div>`;
    }).join("");
}

// TIMER synced to real minute
function timer(){
  const s=60-new Date().getSeconds();
  document.getElementById("timer").innerText=`${s}s remaining`;
}

tick();
setInterval(tick,60000);
setInterval(timer,1000);
timer();
</script>
</body>
</html>
