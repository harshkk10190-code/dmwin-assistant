<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DmWin Smart Assistant</title>

<style>
body{
  margin:0;
  font-family:system-ui, sans-serif;
  background:linear-gradient(180deg,#050b1f,#0b1535);
  color:#e8ecff;
}
.container{
  max-width:420px;
  margin:20px auto;
  padding:16px;
}
.card{
  background:#0e1a3a;
  border:1px solid #1f3b8f;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
}
h1{margin:0;font-size:20px}
.small{font-size:13px;opacity:.75}

.green{color:#2ecc71}
.red{color:#ff4d4d}
.wait{color:#f1c40f}

.footer{
  text-align:center;
  font-size:12px;
  opacity:.6;
}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ§  DmWin Smart Assistant</h1>
<div class="small">Education / analysis only</div>

<div class="card">
  ğŸŸ¢ <b>Status:</b> LIVE<br>
  â± <span id="timer">60s remaining</span>
</div>

<div class="card" id="predictionBox">
  ğŸ”® Loading prediction...
</div>

<div class="card" id="resultBox">
  ğŸ“„ Waiting for result...
</div>

<div class="card" id="statsBox">
  ğŸ“Š Wins: 0 | âŒ Losses: 0 | ğŸ¯ Accuracy: 0%
</div>

<div class="card">
  ğŸ“œ <b>Latest Results</b>
  <div id="history"></div>
</div>

<div class="footer">
  âš  No guarantees â€¢ Avoid over betting â€¢ Stay disciplined
</div>

</div>

<script>
const API =
"https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageNo=1&pageSize=20";

let lastPrediction = null;
let lastPredIssue = null;
let wins = 0, losses = 0;
let countdown = 60;

/* ---------------- UTIL ---------------- */

function colorOf(n){
  n = Number(n);
  if(n===0) return "red,violet";
  if(n===5) return "green,violet";
  return n%2===0 ? "red" : "green";
}

/* ---------------- CORE AI ---------------- */

function analyze(list){
  let g=0,r=0,v=0;
  let recent=[];

  list.forEach((i,idx)=>{
    let w = idx<5 ? 1.5 : idx<10 ? 1 : 0.6;
    let c = colorOf(i.number);

    if(c.includes("violet")) v+=w;
    if(c==="green") g+=w;
    if(c==="red") r+=w;

    if(!c.includes("violet") && recent.length<3){
      recent.push(c);
    }
  });

  const total = g+r;
  const bias = Math.max(g,r)/Math.max(1,total);

  /* âŒ BLOCK CONDITIONS */
  if(v>=3) return {action:"WAIT",reason:"High violet risk"};
  if(bias<0.55) return {action:"WAIT",reason:"Low bias"};

  /* ğŸ”¥ POST-VIOLET CONTINUATION */
  if(recent.length>=2 && recent[0]===recent[1]){
    return {
      action: recent[0].toUpperCase(),
      confidence: Math.round(bias*100),
      reason: "Momentum continuation"
    };
  }

  /* ğŸ”¥ DOMINANT TREND */
  return {
    action: g>r ? "GREEN" : "RED",
    confidence: Math.round(bias*100),
    reason: "Trend dominance"
  };
}

/* ---------------- MAIN LOOP ---------------- */

async function tick(){
  const res = await fetch(API);
  const json = await res.json();
  const list = json.data.list;

  const latest = list[0];
  const analysis = analyze(list);

  /* ----- PREDICTION ----- */
  const pBox = document.getElementById("predictionBox");
  if(analysis.action==="WAIT"){
    pBox.innerHTML = `
      ğŸ”® <b>Prediction:</b> <span class="wait">WAIT</span><br>
      <span class="small">âš  ${analysis.reason}</span>
    `;
    lastPrediction = null;
    lastPredIssue = null;
  }else{
    pBox.innerHTML = `
      ğŸ¯ <b>Prediction:</b>
      <span class="${analysis.action.toLowerCase()}">${analysis.action}</span><br>
      <span class="small">Confidence: ${analysis.confidence}% â€¢ ${analysis.reason}</span>
    `;
    lastPrediction = analysis.action;
    lastPredIssue = latest.issueNumber;
  }

  /* ----- RESULT CHECK ----- */
  const rBox = document.getElementById("resultBox");
  if(lastPrediction && latest.issueNumber!==lastPredIssue){
    const actual = colorOf(latest.number);
    if(actual.includes(lastPrediction.toLowerCase())){
      wins++;
      rBox.innerHTML = `âœ… Last Result: <span class="green">WIN</span>`;
    }else{
      losses++;
      rBox.innerHTML = `âŒ Last Result: <span class="red">LOSS</span>`;
    }
    lastPrediction = null;
  }else{
    rBox.innerHTML = "ğŸ“„ Waiting for result...";
  }

  const total = wins+losses;
  const acc = total ? Math.round(wins/total*100) : 0;
  document.getElementById("statsBox").innerHTML =
    `ğŸ“Š Wins: ${wins} | âŒ Losses: ${losses} | ğŸ¯ Accuracy: ${acc}%`;

  /* ----- HISTORY ----- */
  document.getElementById("history").innerHTML =
    list.slice(0,5).map(i=>{
      const c = colorOf(i.number);
      return `<div class="${c.includes("green")?"green":"red"}">
        ${i.issueNumber} â†’ ${c}
      </div>`;
    }).join("");
}

/* ---------------- TIMER ---------------- */

setInterval(()=>{
  countdown--;
  if(countdown<=0) countdown=60;
  document.getElementById("timer").innerText = countdown+"s remaining";
},1000);

/* ---------------- START ---------------- */

tick();
setInterval(tick,60000);
</script>
</body>
</html>
