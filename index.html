<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ§  DmWin Smart Assistant</title>

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(180deg,#050b1f,#0b1535);
  color:#e8ecff;
}
.container{
  max-width:420px;
  margin:20px auto;
  padding:16px;
}
.card{
  background:#0e1a3a;
  border:1px solid #1f3b8f;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
h1{margin:0 0 6px;font-size:22px}
.small{opacity:.7;font-size:13px}

.green{color:#2ecc71}
.red{color:#ff4d4d}
.violet{color:#c77dff}
.wait{color:#f1c40f}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ§  DmWin Smart Assistant</h1>
<div class="small">ğŸ“˜ Education / analysis only</div>

<div class="card">
ğŸŸ¢ <b>Status:</b> LIVE<br>
â³ <span id="timer">Syncingâ€¦</span>
</div>

<div class="card" id="colorBox">Loading Color AIâ€¦</div>
<div class="card" id="sizeBox">Loading Big/Small AIâ€¦</div>

<div class="card" id="resultBox">Waiting for resultâ€¦</div>

<div class="card" id="statsBox">
ğŸ“Š Wins: 0 | âŒ Losses: 0 | ğŸ¯ Accuracy: 0%
</div>

<div class="card">
ğŸ“œ <b>Latest Results</b>
<div id="history"></div>
</div>

<div class="small">
âš ï¸ No guarantees â€¢ Avoid over betting â€¢ Stay disciplined
</div>

</div>

<script>
const API =
"https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageNo=1&pageSize=20";

let lastPrediction = null;
let lastPeriodChecked = null;
let wins = 0, losses = 0;

// â± Countdown synced to clock
setInterval(()=>{
  const s = new Date().getSeconds();
  document.getElementById("timer").innerText =
    `â³ ${60 - s}s remaining`;
},1000);

// ğŸ¨ Color logic
function colorOf(n){
  if(n===0 || n===5) return "violet";
  return n%2===0 ? "red" : "green";
}

// ğŸ“ Size logic
function sizeOf(n){
  return n <= 4 ? "SMALL" : "BIG";
}

// ğŸ§  Color AI
function colorAI(list){
  let g=0, r=0, v=0;

  list.slice(0,8).forEach((i,idx)=>{
    const w = 8-idx;
    const c = colorOf(i.number);
    if(c==="green") g+=w;
    if(c==="red") r+=w;
    if(c==="violet") v++;
  });

  const confidence = Math.abs(g-r)*8;

  if(v>=2) return {action:"WAIT",reason:"Violet risk"};
  if(confidence < 50) return {action:"WAIT",reason:"Low confidence"};

  return g>r
    ? {action:"GREEN",confidence}
    : {action:"RED",confidence};
}

// ğŸ“ Big/Small AI
function sizeAI(list){
  let big=0, small=0;
  list.slice(0,6).forEach(i=>{
    sizeOf(i.number)==="BIG" ? big++ : small++;
  });

  if(big>=4) return "SMALL";
  if(small>=4) return "BIG";
  return "WAIT";
}

async function tick(){
  const res = await fetch(API);
  const json = await res.json();
  const list = json.data.list;

  const latest = list[0];
  const latestColor = colorOf(latest.number);

  // COLOR AI
  const c = colorAI(list);
  if(c.action==="WAIT"){
    colorBox.innerHTML =
      `ğŸ¯ <b>Color AI:</b> <span class="wait">WAIT</span><br>
       <span class="small">âš ï¸ ${c.reason}</span>`;
    lastPrediction = null;
  } else {
    colorBox.innerHTML =
      `ğŸ¯ <b>Color AI:</b>
       <span class="${c.action.toLowerCase()}">${c.action}</span><br>
       ğŸ”¥ Confidence: ${c.confidence}%`;
    lastPrediction = c.action;
  }

  // BIG / SMALL
  const s = sizeAI(list);
  sizeBox.innerHTML =
    `ğŸ“ <b>Big/Small AI:</b> ${s==="WAIT"
      ? '<span class="wait">WAIT</span>'
      : '<b>'+s+'</b>'}`;

  // âœ… WIN / LOSS (only once per new period)
  if(lastPeriodChecked !== latest.issueNumber && lastPrediction){
    if(latestColor === lastPrediction.toLowerCase()){
      wins++;
      resultBox.innerHTML = `âœ… Result: <span class="green">WIN</span>`;
    } else {
      losses++;
      resultBox.innerHTML = `âŒ Result: <span class="red">LOSS</span>`;
    }
    lastPeriodChecked = latest.issueNumber;
  }

  const total = wins + losses;
  const acc = total ? Math.round((wins/total)*100) : 0;
  statsBox.innerHTML =
    `ğŸ“Š Wins: ${wins} | âŒ Losses: ${losses} | ğŸ¯ Accuracy: ${acc}%`;

  // ğŸ“œ HISTORY
  history.innerHTML =
    list.slice(0,5).map(i=>{
      const c = colorOf(i.number);
      return `<div class="${c}">
        ${i.issueNumber} â†’ ${c}
      </div>`;
    }).join("");
}

tick();
setInterval(tick,60000);
</script>

</body>
</html>
