<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DmWin Smart Assistant</title>

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(180deg,#050b1f,#0b1535);
  color:#e8ecff;
}
.container{
  max-width:420px;
  margin:20px auto;
  padding:16px;
}
.card{
  background:#0e1a3a;
  border:1px solid #1f3b8f;
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}
h1{font-size:20px;margin:0}
.small{opacity:.7;font-size:13px}
.green{color:#2ecc71}
.red{color:#ff4d4d}
.violet{color:#c77dff}
.wait{color:#f1c40f}
.big{color:#3498db}
.smallTxt{color:#f39c12}
hr{border:none;border-top:1px solid #1f3b8f;margin:10px 0}
</style>
</head>

<body>
<div class="container">

<h1>ğŸ§  DmWin Smart Assistant</h1>
<div class="small">ğŸ“˜ Education / analysis only</div>

<div class="card">
  ğŸŸ¢ <b>Status:</b> <span class="green">LIVE</span><br>
  ğŸ”„ <span class="small">Manual refresh â€¢ Auto fetch every 60s</span>
</div>

<div class="card" id="predictionBox">â³ Loading predictionâ€¦</div>

<div class="card" id="bigSmallBox">â³ Loading Big/Smallâ€¦</div>

<div class="card" id="resultBox">âŒ› Waiting for resultâ€¦</div>

<div class="card" id="statsBox">
ğŸ“Š Wins: 0 | âŒ Losses: 0 | ğŸ¯ Accuracy: 0%
</div>

<div class="card">
ğŸ“œ <b>Latest Results</b>
<div id="history" class="small">Loadingâ€¦</div>
</div>

<div class="small">âš ï¸ No guarantees â€¢ Avoid over betting â€¢ Stay disciplined</div>

</div>

<script>
const API =
"https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json?pageNo=1&pageSize=20";

let lastPrediction = null;
let lastPeriodChecked = null;
let wins = 0, losses = 0;

// COLOR MAP
function colorOf(n){
  n = Number(n);
  if(n === 0) return "red,violet";
  if(n === 5) return "green,violet";
  return n % 2 === 0 ? "red" : "green";
}

// BIG / SMALL
function sizeOf(n){
  n = Number(n);
  return n >= 5 ? "BIG" : "SMALL";
}

// COLOR AI
function analyzeColor(list){
  const colors = list.map(i => colorOf(i.number));
  const pure = colors.filter(c=>!c.includes("violet"));

  const g = pure.filter(c=>c==="green").length;
  const r = pure.filter(c=>c==="red").length;
  const v = colors.filter(c=>c.includes("violet")).length;

  if(v >= 2) return {action:"WAIT", confidence:0, reason:"Violet risk high"};
  if(Math.abs(g-r) <= 1) return {action:"WAIT", confidence:30, reason:"Low bias"};

  return {
    action: g > r ? "GREEN" : "RED",
    confidence: Math.min(90, 50 + Math.abs(g-r)*10)
  };
}

// BIG SMALL AI
function analyzeSize(list){
  const sizes = list.map(i => sizeOf(i.number));
  const big = sizes.filter(s=>s==="BIG").length;
  const small = sizes.filter(s=>s==="SMALL").length;

  if(Math.abs(big-small) <= 1) return "WAIT";
  return big > small ? "BIG" : "SMALL";
}

async function tick(){
  const res = await fetch(API);
  const json = await res.json();
  const list = json.data.list;
  if(!list || !list.length) return;

  const latest = list[0];
  const latestColor = colorOf(latest.number);

  // COLOR PREDICTION
  const c = analyzeColor(list);
  const pBox = document.getElementById("predictionBox");

  if(c.action === "WAIT"){
    pBox.innerHTML = `
      ğŸ¯ <b>Color AI:</b> <span class="wait">WAIT</span><br>
      âš ï¸ <span class="small">${c.reason}</span>
    `;
    lastPrediction = null;
  }else{
    pBox.innerHTML = `
      ğŸ¯ <b>Color AI:</b>
      <span class="${c.action.toLowerCase()}">${c.action}</span><br>
      ğŸ”¥ Confidence: ${c.confidence}%
    `;
    lastPrediction = c.action;
  }

  // BIG SMALL
  const bs = analyzeSize(list);
  document.getElementById("bigSmallBox").innerHTML = `
    ğŸ“ <b>Big/Small AI:</b>
    <span class="${bs==="BIG"?"big":bs==="SMALL"?"smallTxt":"wait"}">${bs}</span>
  `;

  // RESULT CHECK (ONCE PER PERIOD)
  const rBox = document.getElementById("resultBox");
  if(lastPeriodChecked !== latest.issueNumber){
    if(!lastPrediction){
      rBox.innerHTML = `â¸ï¸ No bet placed (WAIT)`;
    }else{
      if(latestColor.includes(lastPrediction.toLowerCase())){
        wins++;
        rBox.innerHTML = `âœ… Result: <span class="green">WIN</span>`;
      }else{
        losses++;
        rBox.innerHTML = `âŒ Result: <span class="red">LOSS</span>`;
      }
    }
    lastPeriodChecked = latest.issueNumber;
  }

  // STATS
  const total = wins + losses;
  const acc = total ? Math.round((wins/total)*100) : 0;
  document.getElementById("statsBox").innerHTML =
    `ğŸ“Š Wins: ${wins} | âŒ Losses: ${losses} | ğŸ¯ Accuracy: ${acc}%`;

  // HISTORY
  document.getElementById("history").innerHTML =
    list.slice(0,5).map(i=>{
      const c = colorOf(i.number);
      return `<div class="${c.includes("green")?"green":c.includes("red")?"red":"violet"}">
        ${i.issueNumber} â†’ ${c}
      </div>`;
    }).join("");
}

tick();
setInterval(tick,60000);
</script>

</body>
</html>
